{% extends 'base.html' %}

{% block title %}Book {{ hotel.name }} - Nomado{% endblock %}

{% block content %}
<div style="margin-bottom: 2rem;">
    <h1 style="color: #667eea;">Complete Your Booking</h1>
    <p style="color: #666;">{{ hotel.name }}, {{ hotel.city }}</p>
</div>

<div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
    <!-- Booking Form -->
    <div class="card">
        <h3 style="color: #667eea; margin-bottom: 1.5rem;">Guest Details</h3>
        
        <form method="post">
            {% csrf_token %}
            
            <!-- Contact Information -->
            <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem;">
                <h4 style="color: #667eea; margin-bottom: 1rem;">Contact Information</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="{{ form.contact_name.id_for_label }}">Full Name</label>
                        <input type="text" name="contact_name" id="{{ form.contact_name.id_for_label }}" class="form-control" value="{{ form.contact_name.value|default:'' }}" required>
                        {% if form.contact_name.errors %}
                            <div style="color: #e74c3c; font-size: 0.9rem;">{{ form.contact_name.errors }}</div>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        <label for="{{ form.contact_phone.id_for_label }}">Phone Number</label>
                        <input type="text" name="contact_phone" id="{{ form.contact_phone.id_for_label }}" class="form-control" value="{{ form.contact_phone.value|default:'' }}" required>
                        {% if form.contact_phone.errors %}
                            <div style="color: #e74c3c; font-size: 0.9rem;">{{ form.contact_phone.errors }}</div>
                        {% endif %}
                    </div>
                </div>
                <div class="form-group">
                    <label for="{{ form.contact_email.id_for_label }}">Email Address</label>
                    <input type="email" name="contact_email" id="{{ form.contact_email.id_for_label }}" class="form-control" value="{{ form.contact_email.value|default:'' }}" required>
                    {% if form.contact_email.errors %}
                        <div style="color: #e74c3c; font-size: 0.9rem;">{{ form.contact_email.errors }}</div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Booking Details -->
            <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem;">
                <h4 style="color: #667eea; margin-bottom: 1rem;">Booking Details</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        <label for="{{ form.guests.id_for_label }}">Number of Guests</label>
                        <input type="number" name="guests" id="{{ form.guests.id_for_label }}" class="form-control" value="{{ guests }}" readonly>
                    </div>
                    <div class="form-group">
                        <label for="{{ form.rooms.id_for_label }}">Number of Rooms</label>
                        <input type="number" name="rooms" id="{{ form.rooms.id_for_label }}" class="form-control" value="{{ rooms }}" readonly>
                    </div>
                </div>
            </div>
            
            <!-- Special Requests -->
            <div class="form-group">
                <label for="{{ form.special_requests.id_for_label }}">Special Requests (Optional)</label>
                <textarea name="special_requests" id="{{ form.special_requests.id_for_label }}" class="form-control" rows="3" placeholder="Any special requirements, dietary preferences, accessibility needs, etc.">{{ form.special_requests.value|default:'' }}</textarea>
                {% if form.special_requests.errors %}
                    <div style="color: #e74c3c; font-size: 0.9rem;">{{ form.special_requests.errors }}</div>
                {% endif %}
            </div>
            
            <!-- Terms and Conditions -->
            <div style="margin: 2rem 0;">
                <label style="display: flex; align-items: center; gap: 0.5rem;">
                    <input type="checkbox" required> 
                    I agree to the <a href="#" style="color: #667eea;">Terms & Conditions</a> and <a href="#" style="color: #667eea;">Cancellation Policy</a>
                </label>
            </div>
            
            <button type="submit" class="btn" style="width: 100%; padding: 15px; font-size: 1.1rem;">
                Proceed to Payment - ‚Çπ{{ total_amount|floatformat:0 }}
            </button>
        </form>
    </div>
    
    <!-- Booking Summary -->
    <div>
        <div class="card">
            <h3 style="color: #667eea; margin-bottom: 1.5rem;">Booking Summary</h3>
            
            {% if hotel.images.all %}
                <img src="{{ hotel.images.first.image.url }}" alt="{{ hotel.name }}" style="width: 100%; height: 150px; object-fit: cover; border-radius: 8px; margin-bottom: 1rem;">
            {% else %}
                <div style="width: 100%; height: 150px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem; margin-bottom: 1rem;">
                    üè®
                </div>
            {% endif %}
            
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: #333; margin-bottom: 0.5rem;">{{ hotel.name }}</h4>
                <div style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">{{ hotel.address }}, {{ hotel.city }}</div>
                
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-weight: bold; color: #667eea;">{{ hotel.overall_rating|floatformat:1 }}</span>
                        <div style="color: #ffa500;">
                            {% for i in "12345" %}
                                {% if forloop.counter <= hotel.overall_rating %}‚≠ê{% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span>Check-in:</span>
                    <strong>{{ check_in_date }}</strong>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span>Check-out:</span>
                    <strong>{{ check_out_date }}</strong>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span>Nights:</span>
                    <strong>{{ nights }}</strong>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span>Rooms:</span>
                    <strong>{{ rooms }}</strong>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span>Guests:</span>
                    <strong>{{ guests }}</strong>
                </div>
            </div>
            
            <!-- Amenities -->
            <div style="margin-bottom: 1.5rem;">
                <strong style="color: #333; margin-bottom: 0.5rem; display: block;">Amenities Included:</strong>
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                    {% if hotel.wifi %}
                        <span style="background: #e8f4fd; color: #1976d2; padding: 3px 8px; border-radius: 12px; font-size: 0.7rem;">üì∂ WiFi</span>
                    {% endif %}
                    {% if hotel.parking %}
                        <span style="background: #e8f4fd; color: #1976d2; padding: 3px 8px; border-radius: 12px; font-size: 0.7rem;">üöó Parking</span>
                    {% endif %}
                    {% if hotel.restaurant %}
                        <span style="background: #e8f4fd; color: #1976d2; padding: 3px 8px; border-radius: 12px; font-size: 0.7rem;">üçΩÔ∏è Restaurant</span>
                    {% endif %}
                    {% if hotel.pool %}
                        <span style="background: #e8f4fd; color: #1976d2; padding: 3px 8px; border-radius: 12px; font-size: 0.7rem;">üèä Pool</span>
                    {% endif %}
                    {% if hotel.gym %}
                        <span style="background: #e8f4fd; color: #1976d2; padding: 3px 8px; border-radius: 12px; font-size: 0.7rem;">üí™ Gym</span>
                    {% endif %}
                    {% if hotel.air_conditioning %}
                        <span style="background: #e8f4fd; color: #1976d2; padding: 3px 8px; border-radius: 12px; font-size: 0.7rem;">‚ùÑÔ∏è AC</span>
                    {% endif %}
                </div>
            </div>
            
            <!-- Pricing Breakdown -->
            <div style="border-top: 1px solid #ddd; padding-top: 1rem;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span>Room charges ({{ nights }} nights)</span>
                    <span>‚Çπ{{ hotel.price_per_night|floatformat:0 }} √ó {{ nights }}</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span>Taxes & fees</span>
                    <span>‚Çπ{{ hotel.price_per_night|floatformat:0 }}</span>
                </div>
                <hr>
                <div style="display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: bold; color: #333;">
                    <span>Total Amount</span>
                    <span>‚Çπ{{ total_amount|floatformat:0 }}</span>
                </div>
            </div>
        </div>
        
        <!-- Hotel Policies -->
        <div class="card" style="margin-top: 1rem; background: #fff3cd;">
            <h4 style="color: #856404; margin-bottom: 1rem;">üìã Hotel Policies</h4>
            <ul style="color: #856404; font-size: 0.9rem; margin: 0; padding-left: 1.5rem;">
                <li>Check-in: 2:00 PM | Check-out: 12:00 PM</li>
                <li>Valid ID required at check-in</li>
                <li>Cancellation allowed up to 24 hours before check-in</li>
                <li>Extra person charges may apply</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}